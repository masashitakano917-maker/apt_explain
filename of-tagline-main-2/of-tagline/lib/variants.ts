// lib/variants.ts
// 表現バリエーション辞書＆テンプレ群

export const VARIANTS = {
  managed: [
    "計画的に維持管理されています",
    "継続的なメンテナンスが行き届いています",
    "適切な管理体制のもと良好な状態が保たれています",
    "保全が行われ、美観と機能が維持されています",
    "日常の点検・清掃が行われ、安心感があります",
  ],
  convenience: [
    "日常の買い物施設がそろいます",
    "暮らしに必要な店舗が充実しています",
    "普段使いのショップが点在しています",
    "生活利便施設が身近に整っています",
    "毎日の買い物に便利な環境です",
  ],
  calm: [
    "落ち着いた住環境が広がります",
    "静穏な暮らし心地が得られます",
    "穏やかな住宅環境です",
    "静けさとゆとりを感じられます",
    "落ち着きある街並みに寄り添います",
  ],
} as const;

export type VariantKey = keyof typeof VARIANTS;

/** テンプレの断片（文構成のゆらぎ用） */
export const TEMPLATES = {
  outline: [
    // 立地＋性格
    "【名】は、【駅】から徒歩【分】に位置する分譲マンションです。周辺には【利便】、【静けさ】が両立する環境が整います。",
    "【名】は、【駅】徒歩【分】のロケーション。身近に【利便】が揃い、【静けさ】が感じられる住環境です。",
    "【駅】から徒歩【分】に立地する【名】。毎日の暮らしに役立つ【利便】と、【静けさ】を兼ね備えています。",
  ],
  building: [
    "建物は鉄筋コンクリート造の【階】階建、総戸数【戸】戸。{管理}。",
    "鉄筋コンクリート造【階】階建・総戸数【戸】戸の規模で、{管理}。",
    "RC造【階】階建、全【戸】戸。{管理}。",
  ],
  access: [
    "アクセスは【駅】の利用に加え、周辺の公共交通も使いやすく、都心方面へもスムーズです。",
    "【駅】の利用に便利で、各方面への移動も軽快です。",
    "最寄りの【駅】に加えて路線バス等も利用でき、通勤・通学を支えます。",
  ],
  life: [
    "敷地内には駐車場を備え、周辺には公園や学校も点在し、家族の暮らしを支えます。",
    "身近に公園や学校があり、落ち着いた日常を後押しします。",
    "近隣に教育施設や公園がそろい、穏やかな生活を支えます。",
  ],
  close: [
    "【名】は、【静けさ】と利便をバランスよく備えた住まいです。",
    "【名】で、日々の暮らしに心地よさを見つけてください。",
    "【名】は、落ち着きと使いやすさを両立した住環境を提案します。",
  ],
} as const;

/** 乱択ユーティリティ（同じ入力で毎回だいたい違うが過度にブレない） */
export function pick<T>(arr: readonly T[], seed: number): T {
  const i = Math.abs(Math.floor((Math.sin(seed) + 1) * 1e6)) % arr.length;
  return arr[i];
}
export function hashSeed(...xs: string[]) {
  const s = xs.join("|");
  let h = 2166136261 >>> 0;
  for (let i = 0; i < s.length; i++) h = (h ^ s.charCodeAt(i)) * 16777619 >>> 0;
  return h;
}

/** 句読点・空白の軽整形（連続句読点/読点後のスペース等） */
export function microPunctFix(t: string) {
  return (t || "")
    .replace(/、{2,}/g, "、")
    .replace(/。。+/g, "。")
    .replace(/，/g, "、")
    .replace(/．/g, "。")
    .replace(/。\s*([^\n])/g, "。$1")
    .replace(/、\s*/g, "、")
    .replace(/\s{2,}/g, " ")
    .trim();
}
